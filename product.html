<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞–≥—Ä—É–∑–∫–∞... | –†–ê–°–°–í–ï–¢-–°</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body class="product-page-body">
    <header class="header">
        <div class="container header-main">
            <div class="logo-block" onclick="location.href='index.html'" style="cursor:pointer">
                <div class="logo-symbol">K</div>
                <div class="logo-text"><h1>–†–ê–°–°–í–ï–¢-–°</h1></div>
            </div>
            <a href="index.html" class="btn-catalog">‚Üê –í –∫–∞—Ç–∞–ª–æ–≥</a>
        </div>
    </header>

    <main class="container">
        <div id="productContent" class="product-detail-view">
            </div>
    </main>

    <script src="config.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const productId = params.get('id');
            const content = document.getElementById('productContent');

            const data = JSON.parse(localStorage.getItem('rassvet_db') || '[]');
            const p = data.find(item => item.id == productId);

            if (!p) {
                content.innerHTML = '<div style="text-align:center; padding:100px;"><h2>–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω</h2><a href="index.html">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥</a></div>';
                return;
            }

            document.title = `${p.name} - –ê—Ä—Ç–∏–∫—É–ª ${p.sku} | –†–ê–°–°–í–ï–¢-–°`;
            const img = p.image ? `images/parts/${p.image}` : SITE_CONFIG.placeholderImage;
            const wa = `https://wa.me/${SITE_CONFIG.phone}?text=${encodeURIComponent('–ò–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∑–∞–ø—á–∞—Å—Ç—å: ' + p.name + ' (–ê—Ä—Ç: ' + p.sku + ')')}`;
            const price = p.price ? Number(p.price).toLocaleString() + ' ‚ÇΩ' : '–ü–æ –∑–∞–ø—Ä–æ—Å—É';

            content.innerHTML = `
                <div class="product-layout">
                    <div class="product-img-box">
                        <img src="${img}" onerror="this.src='${SITE_CONFIG.placeholderImage}'">
                    </div>
                    <div class="product-info-box">
                        <span class="sku-tag">OEM –ê—Ä—Ç–∏–∫—É–ª: ${p.sku}</span>
                        <h1>${p.name}</h1>
                        <div class="main-price">${price}</div>
                        <div class="action-buttons">
                            <a href="tel:${SITE_CONFIG.phone}" class="btn-main btn-blue">–ü–æ–∑–≤–æ–Ω–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É</a>
                            <a href="${wa}" target="_blank" class="btn-main btn-green">–ó–∞–∫–∞–∑–∞—Ç—å –≤ WhatsApp</a>
                        </div>
                        <div class="extra-info">
                            <p><b>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</b> ${p.category || '–ó–∞–ø—á–∞—Å—Ç–∏ Komatsu'}</p>
                            <p>‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞</p>
                            <p>üöõ –î–æ—Å—Ç–∞–≤–∫–∞ –∏–∑ –°–ü–± –≤–æ –≤—Å–µ —Ä–µ–≥–∏–æ–Ω—ã –†–§</p>
                        </div>
                    </div>
                </div>
            `;
        });
    </script>
</body>
</html>